# [NoSQL Tapes - MapReduce at Couchbase](http://nosqltapes.com/video/understanding-mapreduce-with-mike-miller)

Mike Miller - CTO of Cloudant, teaches at Washington University

*What is MapReduce? Why is a special case in NoSQL?*

Pattern from the 60' that allows parallel processing. Map and Reduce are separate parts of the algorithm; Map is completely stateless and independent, Reduce requires to know about the flow, and can sometimes also be parallelized.

Map Reduce is a distributed sort. Complexity lays on each node sorting its own data and putting it all together.

Nodes are loaded with data and are independent one from the other.

The code outputs key value pairs and performs a sorting transparent to the one using MapReduce. Sorted key-value pairs are received by Reducer, that considers this information to performs calculations.

To break up the reducer process into multiple machines, we can use a partition function, which routes key-values generated by mapper to specific Reducer instances.

One reason for being applied successfully over NoSQL databases is the fact that if you have schemaless data, allows to introspect data without strong assumptions: in a single line of map, you can perform the ETL process: if it has this field, I treat it this way.

One thing people are encouraged before they write MR code, is to consider if they need the reduce phase.

By nesting MR, you can do complex things as analyzing a social graph.
CouchDB performs an incremental MR, so once you create a MR, it will go on computing it incrementally, so that when you ask for the result, is already there: does not require to compute over all data.

CouchDB is a document oriented DB, where documents are represented in json.

The key in CouchDB can be a complex structure, ex.: an array, that would allow to use a group level, which is a functionality specific to CouchDB. This would return the result by array level (array is a hierarchy!) allowing to view the result at different granularities. Use the most significant on the left, and the least significant on the right. To produce the new level of aggregation, it won't return extra rows, but perform new reduce processes and return a result.

CouchDB is not just about NoSQL but also about real time aggregations and results.
